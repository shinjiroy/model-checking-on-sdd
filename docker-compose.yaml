services:
  # Alloy検証サービス
  alloy-verify:
    build:
      context: ./docker
      dockerfile: Dockerfile
    volumes:
      # Spec Kitのspecsディレクトリをマウント
      - ./specs:/specs:ro
      # 検証結果を出力するディレクトリ
      - ./verification-results:/results
    working_dir: /specs
    # デフォルトでは対話的に実行
    stdin_open: true
    tty: true

  # 開発用: Alloy環境にシェルでアクセス
  alloy-shell:
    build:
      context: ./docker
      dockerfile: Dockerfile
    volumes:
      - ./specs:/specs
    working_dir: /specs
    entrypoint: ["/bin/sh"]
    stdin_open: true
    tty: true
